<!--
  Generated template for the LocationDetailPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>地点详情</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <ion-card *ngIf="locationInfo">
    <ion-card-content>
      <ion-card-title>{{locationInfo.locationInfo?.name}}</ion-card-title>
      <div>
        <ion-icon name="pin"></ion-icon> {{locationInfo.locationInfo?.district + locationInfo.locationInfo?.address}}
      </div>
      <p class="location-desc">
        {{locationInfo.description}}
      </p>
    </ion-card-content>
  </ion-card>
  <map-view [location]="lnglat" [viewType]="'location-view'"></map-view>
  <ion-card>
    <img src="{{img | imagefilter:'mural'  }}" alt="" *ngFor='let img of locationInfo.imgs' class="location-img">
  </ion-card>
  <div class="comment-ctn">
    <ion-item>
      <ion-textarea #commentInput class="comment-input" rows="1" maxLength="500" (keydown)="resize($event)" [(ngModel)]="commentInputValue" placeholder="发表你的评论吧"></ion-textarea>
      <button ion-button item-right (click)="sendComment()" class="comment-btn">评论</button>
    </ion-item>
    <ion-list class="comment-list">
      <ion-item class="comment-item" *ngFor="let comment of commentList" (click)="replyComment(commentInput, comment.fromUser)">
        <ion-avatar item-start>
          <img src="{{comment.fromUser.avatar | imagefilter:'avatar'}}">
        </ion-avatar>
        <div class="comment-name">{{comment.fromUser.name}}</div>
        <p><span class="replay-name" *ngIf="comment.toUser">回复 {{comment.toUser?.name}} </span>{{comment.content}}</p>
      </ion-item>
    </ion-list>
  </div>
</ion-content>
